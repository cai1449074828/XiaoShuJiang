# SplashActivity
SplashActivity已放入文件夹"搬运代码"中,**以下style&&AndroidManifest需要设置**，并且还需设置需设置图片和权限。
图片设置在initFixedImageView()中,是从assets中获取的图片
## style&&AndroidManifest
AndroidManifest.xml
```
<activity
            android:configChanges="orientation|screenSize|keyboardHidden"
            android:screenOrientation="portrait"
            android:name=".SplashActivity"
            android:theme="@style/AppTheme.Splash">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
```
style.xml
```
<style name="AppTheme.Splash">
        <item name="android:windowFullscreen">false</item>
        <item name="android:windowBackground">@drawable/welcome_default2</item>
    </style>
```
## 图片设置&&图片动画
```
@Bind(R.id.imageView_splash)
    ImageView mImageViewSplash;
    private void initFixedImageView() {
        try {
            mImageViewSplash.setImageDrawable(Drawable.createFromStream(getAssets().open("welcome_default.jpg"), null));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
```
### 图片放大动画
```
private static final int ANIMATION_DURATION = 1000;
    private static final float SCALE_END = 1.13F;
    private void animateImage_scale() {
        //宽度由1倍放大为SCALE_END倍
        ObjectAnimator animatorX = ObjectAnimator.ofFloat(mImageViewSplash, "scaleX", 1f, SCALE_END);
        ObjectAnimator animatorY = ObjectAnimator.ofFloat(mImageViewSplash, "scaleY", 1f, SCALE_END);

        AnimatorSet set = new AnimatorSet();
        set.setDuration(ANIMATION_DURATION).play(animatorX).with(animatorY);
        set.start();
        set.addListener(new AnimatorListenerAdapter() {
            @Override
            public void onAnimationEnd(Animator animation) {
                startActivity(new Intent(SplashActivity.this, MainActivity.class));
                finish();
                //淡出淡入
                overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);
            }
        });
    }
```
### 图片移动动画
```
private void animateImage_translation() {
        ObjectAnimator animator = ObjectAnimator.ofFloat(mImageViewSplash, "translationX", -100F);
        animator.setDuration(1500L).start();
        animator.addListener(new Animator.AnimatorListener() {
            @Override
            public void onAnimationStart(Animator animation) {

            }

            @Override
            public void onAnimationEnd(Animator animation) {
                startActivity(new Intent(SplashActivity.this, MainActivity.class));
                finish();
                //淡出淡入
                overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);
            }

            @Override
            public void onAnimationCancel(Animator animation) {

            }

            @Override
            public void onAnimationRepeat(Animator animation) {

            }
        });
    }
```
## 6.0动态权限调用
```
    private static final int PERMISSON_REQUESTCODE = 1;
    /**
     * 需要进行检测的权限数组
     */
    protected String[] needPermissions = {
            Manifest.permission.WRITE_EXTERNAL_STORAGE,
            Manifest.permission.READ_EXTERNAL_STORAGE,
            Manifest.permission.READ_PHONE_STATE
    };

    @AfterPermissionGranted(PERMISSON_REQUESTCODE)
    private void requestCodePermissions() {
        System.out.println("检查权限");
        if (!EasyPermissions.hasPermissions(this, needPermissions)) {
            //没有权限
            EasyPermissions.requestPermissions(this, "应用需要这些权限", PERMISSON_REQUESTCODE, needPermissions);
        } else {
            //        animateImage_scale();
            animateImage_translation();
        }
    }
    @Override
    public void onPermissionsGranted(int requestCode, List<String> perms) {

    }
    @Override
    public void onPermissionsDenied(int requestCode, List<String> perms) {
        showMissingPermissionDialog();
    }
    /**
     * 申请权限结果的回调方法
     */
    @Override
    public void onRequestPermissionsResult(int requestCode,
                                           String[] permissions, int[] paramArrayOfInt) {
        EasyPermissions.onRequestPermissionsResult(requestCode, permissions, paramArrayOfInt,this);
    }

    private void showMissingPermissionDialog() {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("提示");
        builder.setMessage("当前应用缺少必要权限。请点击\"设置\"-\"权限\"-打开所需权限。");

        // 拒绝, 退出应用
        builder.setNegativeButton("取消",
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        finish();
                    }
                });

        builder.setPositiveButton("设置",
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        startAppSettings();
                    }
                });

        builder.setCancelable(false);

        builder.show();
    }

    /**
     * 启动应用的设置
     */
    private void startAppSettings() {
        Intent intent = new Intent(
                Settings.ACTION_APPLICATION_DETAILS_SETTINGS);
        intent.setData(Uri.parse("package:" + getPackageName()));
        startActivity(intent);
    }
```
在开始时申请权限
onStart->requestCodePermissions();
## 清除状态栏和导航栏的存在
```
private void initStatus() {
        if (Build.VERSION.SDK_INT >= 21) {
            View decorView = getWindow().getDecorView();
            int option = View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
                    | View.SYSTEM_UI_FLAG_LAYOUT_STABLE;
            decorView.setSystemUiVisibility(option);
            getWindow().setStatusBarColor(Color.TRANSPARENT);
        }
    }
```
# 页面初始布局
## framelayout+导航栏
```
    private Fragment fragment1=new ContactsFragment();
    private Fragment fragment2=new ContactsFragment();
    private Fragment fragment3=new ContactsFragment();
    private FragmentTransaction fragmentTransaction;
    private ArrayList<Fragment> list_fragment=new ArrayList<>();
    private void initFrameLayout() {
        list_fragment.add(fragment1);
        list_fragment.add(fragment2);
        list_fragment.add(fragment3);
        fragmentTransaction=getFragmentManager().beginTransaction();
        for (int i=0;i<list_fragment.size();i++){
            fragmentTransaction.add(R.id.viewPager,list_fragment.get(i));
        }
        fragmentTransaction.commit();
        showFragment(0);
    }
    private void hideFragment() {
        for (int i=0;i<list_fragment.size();i++){
            fragmentTransaction.hide(list_fragment.get(i));
        }
    }
    private void showFragment(int index){
        fragmentTransaction=getFragmentManager().beginTransaction();
        hideFragment();
        fragmentTransaction.show(list_fragment.get(index));
        fragmentTransaction.commit();
    }
    private void initButtonNavigationBar(){
        mBottomNavigationBar
                .addItem(new BottomNavigationItem(R.drawable.ic_profile_answer, "会话"))
                .addItem(new BottomNavigationItem(R.drawable.ic_profile_article, "通讯录"))
                .addItem(new BottomNavigationItem(R.drawable.ic_profile_column, "设置"))
                .setActiveColor(R.color.colorAccent)
                .setMode(BottomNavigationBar.MODE_FIXED)
                .setTabSelectedListener(new BottomNavigationBar.OnTabSelectedListener() {
                    @Override
                    public void onTabSelected(int position) {
                        showFragment(position);
                    }
                    @Override
                    public void onTabUnselected(int position) {
                    }
                    @Override
                    public void onTabReselected(int position) {
                    }
                })
                .initialise();
    }
```
## viewPager+导航栏
```
private class ViewPagerAdapter extends FragmentStatePagerAdapter {
        public ViewPagerAdapter(FragmentManager fm) {
            super(fm);
        }
        @Override
        public CharSequence getPageTitle(int position) {
            return null;
        }
        @Override
        public Fragment getItem(int position) {
            return list_fragment.get(position);
        }
        @Override
        public int getCount() {
            return list_fragment.size();
        }
    }
    private List<String> titles= Arrays.asList("1","2","3","4");
    private ArrayList<Fragment> list_fragment=new ArrayList<>();
    private Fragment fragment1=new ContactsFragment();
    private Fragment fragment2=new ContactsFragment();
    private Fragment fragment3=new ContactsFragment();
    private void initViewPager() {
        list_fragment.add(fragment1);
        list_fragment.add(fragment2);
        list_fragment.add(fragment3);
        mViewPager.setAdapter(new ViewPagerAdapter(getChildFragmentManager()));
        mViewPager.setOffscreenPageLimit(1);
mViewPager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
            @Override
            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
 
            }
 
            @Override
            public void onPageSelected(int position) {
                mBottomNavigationBar.selectTab(position);
            }
 
            @Override
            public void onPageScrollStateChanged(int state) {
 
            }
        });
//        slidingTabLayout.setViewPager(viewPager);
    }
    private void initButtonNavigationBar(){
        mBottomNavigationBar
                .addItem(new BottomNavigationItem(R.drawable.ic_profile_answer, "会话"))
                .addItem(new BottomNavigationItem(R.drawable.ic_profile_article, "通讯录"))
                .addItem(new BottomNavigationItem(R.drawable.ic_profile_column, "设置"))
                .setActiveColor(R.color.colorAccent)
                .setMode(BottomNavigationBar.MODE_FIXED)
                .setTabSelectedListener(new BottomNavigationBar.OnTabSelectedListener() {
                    @Override
                    public void onTabSelected(int position) {
                       mViewPager.setCurrentItem(position);
                    }
                    @Override
                    public void onTabUnselected(int position) {
                    }
                    @Override
                    public void onTabReselected(int position) {
                    }
                })
                .initialise();
    }
```
初始化    
```
        initFrameLayout();
        //initViewPager();
        initButtonNavigationBar();
```
并且替换 list_fragment
切换时        showFragment(position);
## viewpager+tablayout
```
@Bind(R.id.tabLayout)
    TabLayout mTabLayout;
    @Bind(R.id.viewPager)
    ViewPager mViewPager;
    ArrayList<Fragment> list = new ArrayList<>();
    String[][] titles = new String[][]{{"头条", "top"}, {"社会", "shehui"}, {"国内", "guonei"}, {"国际", "guoji"}, {"娱乐", "yule"}, {"体育", "tiyu"}, {"军事", "junshi"}, {"科技", "keji"}, {"财经", "caijing"}, {"时尚", "shishang"}};
    PagerAdapter adapter;

    private void initTabLayout() {
        //初始化fragment
        for (int i = 0; i < titles.length; i++) {
            list.add(News_Fragment.newInstance(titles[i][1]));
        }
        mTabLayout.setupWithViewPager(mViewPager);
        mTabLayout.setTabMode(TabLayout.MODE_SCROLLABLE);
        adapter = new PagerAdapter(getSupportFragmentManager(), list, titles);
        //pager.setOffscreenPageLimit(2);//设置预加载数量
        mViewPager.setAdapter(adapter);
    }
```
initTabLayout放入initViews中
## RecycleView
activity
```
    @Bind(R.id.recyclerView)
    RecyclerView mRecyclerView;
    private ArrayList<String> list = new ArrayList<>();
    private MyRecyclerViewAdapter adapter;

    private void initRecycleView() {
        adapter = new MyRecyclerViewAdapter(this, list);
        mRecyclerView.setLayoutManager(new LinearLayoutManager(this));
        //自动滑动到最低,更新List时需要写一次
        mRecyclerView.setAdapter(adapter);
        //adapter.notifyDataSetChanged();
        //mRecyclerView.smoothScrollToPosition(adapter.getItemCount());
    }
```
MyRecyclerViewAdapter
```

import android.app.Activity;
import android.support.v7.widget.RecyclerView;
import android.view.LayoutInflater;
import android.view.ViewGroup;


import com.example.administrator.ex.R;

import java.util.List;

public class MyRecyclerViewAdapter extends RecyclerView.Adapter<MyRecyclerViewHolder>{
    private List<String> list;
    private Activity activity;
    public MyRecyclerViewAdapter(Activity activity, List<String> list){
        this.activity=activity;
        this.list=list;
    }

    @Override
    public MyRecyclerViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        return new MyRecyclerViewHolder(LayoutInflater.from(activity).inflate(R.layout.item_textview,parent,false),activity);
    }

    @Override
    public void onBindViewHolder(MyRecyclerViewHolder holder, int position) {
        holder.textView.setText(list.get(position).toString());
//            ((TextView)holder.itemView.findViewById(R.id.textView_another2)).setText(list.get(position));
    }

    @Override
    public int getItemCount() {
        return list.size();
    }
}
```
MyRecyclerViewHolder
```
import android.content.Context;
import android.support.v7.widget.RecyclerView;
import android.view.View;
import android.widget.TextView;

import com.example.administrator.ex.R;

import butterknife.Bind;
import butterknife.ButterKnife;
import butterknife.OnClick;

/**
 * Created by Administrator on 2016/8/26.
 */
public class MyRecyclerViewHolder extends RecyclerView.ViewHolder {
    @Bind(R.id.textView)
    TextView textView;
    private Context activity;
    public MyRecyclerViewHolder(View itemView, Context activity) {
        super(itemView);
        ButterKnife.bind(this,itemView);
        this.activity=activity;
    }
}
```
layout：
recyclerView
```
<android.support.v7.widget.RecyclerView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/recyclerView"
        android:layout_weight="1"/>
```
item_textview.xml
```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <TextView
        android:text="TextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/textView"
        android:layout_weight="1"/>
</LinearLayout>
```
recycleView加载时由于RecyclerView.Adapter会自动回收viewholder,所以存在BUG，导致viewholder复用,所以请每次的onBindViewHolder中viewholder要设置完整
recycleView的adapter指定的list必须是同一个list,即地址一致,否则会造成数据不刷新,如果非要不同List,请new 一个adapter;
## DrawerLayout
### DrawerLayout全部Layout
```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v4.widget.DrawerLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/drawerLayout"
	tools:openDrawer="left">
    <android.support.design.widget.CoordinatorLayout
        android:layout_width="match_parent"
    android:layout_height="match_parent">
    <android.support.design.widget.AppBarLayout
        android:layout_height="wrap_content"
        android:layout_width="match_parent">
        <android.support.v7.widget.Toolbar
            android:id="@+id/toolbar"
            android:layout_height="?attr/actionBarSize"
            android:layout_width="match_parent">
        </android.support.v7.widget.Toolbar>
    </android.support.design.widget.AppBarLayout>
        <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:id="@+id/frameLayout"
        app:layout_behavior="@string/appbar_scrolling_view_behavior">
        </FrameLayout>
    </android.support.design.widget.CoordinatorLayout>
    <android.support.design.widget.NavigationView
        android:id="@+id/navigationView"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="start"
		app:headerLayout="@layout/nav_header"
        app:menu="@menu/drawerlayout_menu"/>
</android.support.v4.widget.DrawerLayout>
```
### DrawerLayout在下面Layout
```
<?xml version="1.0" encoding="utf-8"?>
<android.support.design.widget.CoordinatorLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
	android:layout_width="match_parent"
    android:layout_height="match_parent">
    <android.support.v4.widget.DrawerLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/drawerLayout"
		tools:openDrawer="left">
    <android.support.design.widget.AppBarLayout
        android:layout_height="wrap_content"
        android:layout_width="match_parent">
        <android.support.v7.widget.Toolbar
            android:id="@+id/toolbar"
            android:layout_height="?attr/actionBarSize"
            android:layout_width="match_parent">
        </android.support.v7.widget.Toolbar>
    </android.support.design.widget.AppBarLayout>
        <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:id="@+id/frameLayout">
        </FrameLayout>
        <android.support.design.widget.NavigationView
            android:id="@+id/navigationView"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_gravity="start"
			app:headerLayout="@layout/nav_header"
        	app:menu="@menu/drawerlayout_menu"/>
    </android.support.v4.widget.DrawerLayout>
</android.support.design.widget.CoordinatorLayout>
```
### drawerlayout_menu.xml:
```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <!--单选模式-->
    <group android:checkableBehavior="single">
        <item
            android:id="@+id/list_navigation_menu_item"
            android:icon="@drawable/ic_list"
            android:title="@string/list_title" />
        <item
            android:id="@+id/statistics_navigation_menu_item"
            android:icon="@drawable/ic_statistics"
        android:title="@string/statistics_title" />
    </group>
</menu>
```
### nav_header.xml:
```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="192dp"
    android:background="?attr/colorPrimaryDark"
    android:gravity="bottom"
    android:orientation="vertical"
    android:padding="16dp"
    android:theme="@style/ThemeOverlay.AppCompat.Dark">

    <ImageView
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:src="@drawable/logo" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center_horizontal"
        android:text="@string/navigation_view_header_title"
        android:textAppearance="@style/TextAppearance.AppCompat.Body1" />

</FrameLayout>
```
### InitNavigationView()+头像设置;
```
@Bind(R.id.navigationView)
    NavigationView navigationView;
    private File sdcardTempFile;
    private Intent intent;
    private void InitNavigationView() {
        navigationView.setNavigationItemSelectedListener(new NavigationView.OnNavigationItemSelectedListener() {
            @Override
            public boolean onNavigationItemSelected(@NonNull MenuItem item) {
                item.setChecked(true);
                mDrawerLayout.closeDrawers();
                switch (item.getItemId()) {
                    case R.id.menu_singlePerson: {
                        showFragment(0);
                        getSupportActionBar().setTitle(getResources().getString(R.string.app_title_singlePerson));
                        return true;
                    }
                    case R.id.menu_group: {
                        showFragment(1);
                        getSupportActionBar().setTitle(getResources().getString(R.string.app_title_group));
                        return true;
                    }
                    case R.id.menu_setting: {
                        Toast.makeText(getBaseContext(), "setting", Toast.LENGTH_SHORT).show();
                        return true;
                    }
                    case R.id.menu_contactUs: {
                        Toast.makeText(getBaseContext(), "contactUs", Toast.LENGTH_SHORT).show();
                        return true;
                    }
                    default:return false;
                }
            }
        });
        View headerView=navigationView.inflateHeaderView(R.layout.nav_header.xml);
        CircleImageView circleImageView= (CircleImageView) headerView.findViewById(R.id.circleImageView);
        circleImageView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                new AlertDialog.Builder(BB2Activity.this).setItems(new String[]{"从相册获取头像", "拍摄头像"}, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        switch (which){
                            case 0:{
                                intent = new Intent(Intent.ACTION_PICK);
                                intent.setDataAndType(MediaStore.Images.Media.INTERNAL_CONTENT_URI, "image/*");
                                intent.putExtra("output", Uri.fromFile(new File(Environment.getExternalStorageDirectory(),"bbtouxiang.jpg")));
                                intent.putExtra("crop", "true");
                                intent.putExtra("aspectX", 1);// 裁剪框比例
                                intent.putExtra("aspectY", 1);
                                startActivityForResult(intent, 0);
                                break;
                            }
                            case 1:{
                                intent=new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                                intent.putExtra(MediaStore.EXTRA_OUTPUT,Uri.fromFile(new File(Environment.getExternalStorageDirectory(),"bbtouxiang2.jpg")));
                                startActivityForResult(intent,1);
                                break;
                            }
                        }
                    }
                }).show();
            }
        });
        navigationView.inflateMenu(R.menu.drawerlayout_menu);
    }
	@Override
    public void initToolBar() {
        setSupportActionBar(mToolbar);
        ActionBarDrawerToggle actionBarDrawerToggle=new ActionBarDrawerToggle(this,mDrawerLayout,mToolbar,R.string.navigation_drawer_open,R.string.navigation_drawer_close);
        mDrawerLayout.addDrawerListener(actionBarDrawerToggle);
        actionBarDrawerToggle.syncState();
    }
    private FileInputStream fileInputStream;
    private InputStreamReader inputStreamReader;
    private FileOutputStream fileOutputStream;
    private OutputStreamWriter outputStreamWriter;
    private byte c[]=new byte[3000];
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if(resultCode== Activity.RESULT_OK){
            if(requestCode==0){
                try {
                    fileInputStream=new FileInputStream(new File(Environment.getExternalStorageDirectory(),"bbtouxiang.jpg"));
                    fileOutputStream=BB2Activity.this.openFileOutput("bbtouxiang.jpg", Context.MODE_PRIVATE);
                    int bytesum = 0;
                    int byteread = 0;
                    while((byteread = fileInputStream.read(c)) != -1){
                        bytesum += byteread; //字节数 文件大小
                        System.out.println(bytesum);
                        fileOutputStream.write(c, 0, byteread);
                    }
                    ((ImageView)findViewById(R.id.circleImageView)).setImageBitmap(BitmapFactory.decodeFile(sdcardTempFile.getAbsolutePath()));
                }
                catch (IOException e) {
                    e.printStackTrace();
                }
            }
            else if(requestCode==1){
                sdcardTempFile = new File(Environment.getExternalStorageDirectory(),"bbtouxiang2.jpg");
                intent = new Intent("com.android.camera.action.CROP");
                intent.setDataAndType(Uri.fromFile(sdcardTempFile), "image/*");
                // crop为true是设置在开启的intent中设置显示的view可以剪裁
                intent.putExtra("crop", "true");
                intent.putExtra("output", Uri.fromFile(sdcardTempFile));
                // aspectX aspectY 是宽高的比例
                intent.putExtra("aspectX", 1);
                intent.putExtra("aspectY", 1);

                // outputX,outputY 是剪裁图片的宽高
                intent.putExtra("outputX", 300);
                intent.putExtra("outputY", 300);
                intent.putExtra("return-data", true);
                intent.putExtra("noFaceDetection", true);
                startActivityForResult(intent, 11);
                System.out.println("进入2");
            }
            else if(requestCode==11){
                ((ImageView)findViewById(R.id.circleImageView)).setImageBitmap(BitmapFactory.decodeFile(sdcardTempFile.getAbsolutePath()));
            }
            else{
                Toast.makeText(BB2Activity.this, "请重新选择图片", Toast.LENGTH_SHORT).show();
            }
        }
    }
```
## 各种viewPager
### VerticalViewPager
放入../搬运代码\VerticalViewPager
```
@Bind(R.id.verticalViewPager)
    VerticalViewPager mVerticalViewPager;
    private VerticalPagerAdapter mVerticalPagerAdapter;

    private void initVerticalViewPager() {
        mVerticalPagerAdapter=new VerticalPagerAdapter(getSupportFragmentManager());
        mVerticalPagerAdapter.addViewPager(new ContentFragment());
        mVerticalPagerAdapter.addViewPager(new ContentFragment());

        mVerticalViewPager.setAdapter(mVerticalPagerAdapter);
    }
```
VerticalPagerAdapter
```
public class VerticalPagerAdapter extends FragmentStatePagerAdapter{
    public VerticalPagerAdapter(FragmentManager fm) {
        super(fm);
    }
    @Override
    public Fragment getItem(int position) {
        return list_fragments.get(position);
    }
    @Override
    public int getCount() {
        return list_fragments.size();
    }
    private ArrayList<Fragment>list_fragments=new ArrayList<>();
    public void addViewPager(Fragment fragment){
        list_fragments.add(fragment);
//        notifyDataSetChanged();
    }
}
```
## slidemenu
依赖库SildeMenulibrary-release已放入
build.gradle:
```
repositories{
    flatDir{
        dirs 'libs'
    }
}
dependencies {
compile(name: 'SildeMenulibrary-release', ext: 'aar')
}
```
main
```
private SlidingMenu slidingMenu;
    private LeftMenuFragment leftMenu;
    private RightMenuFragment rightMenu;
    private void initMenu() {
        slidingMenu = new SlidingMenu(this);
        slidingMenu.setMode(SlidingMenu.LEFT_RIGHT);
        // 设置触摸屏幕的模式
        slidingMenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
        // 设置渐入渐出效果的值
        slidingMenu.setFadeDegree(0.35f);
        slidingMenu.setFadeEnabled(true);
        slidingMenu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
        //不知道干什么的
        slidingMenu.setShadowWidthRes(R.dimen.shadow_width);
//        slidingMenu.setShadowDrawable(R.drawable.shadow);
        //设置滑倒侧边时中间版的宽度，大于0时可以滑回来
        slidingMenu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
//        slidingMenu.setMenu(R.layout.menu);
        slidingMenu.setMenu(R.layout.left_menu);
        leftMenu = new LeftMenuFragment();
        getSupportFragmentManager().beginTransaction().add(R.id.left_menu, leftMenu).commit();
        slidingMenu.setSecondaryMenu(R.layout.right_menu);
        rightMenu = new RightMenuFragment();
        getSupportFragmentManager().beginTransaction().add(R.id.right_menu, rightMenu).commit();
    }
```
left_menu.xml
```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/left_menu"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent">

</LinearLayout>
```
right_menu:
```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/right_menu"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent">

</LinearLayout>
```
## SwipeRefreshLayout
1.activity:
```
    @Bind(R.id.swipeRefreshLayout)
    SwipeRefreshLayout mSwipeRefreshLayout;
    private void initSwipeRefreshLayout(){
        mSwipeRefreshLayout.setColorSchemeResources(R.color.main, android.R.color.holo_orange_light, android.R.color.holo_red_light, android.R.color.holo_green_light);
//        mSwipeRefreshLayout.setColorSchemeColors(Color.BLACK);
        mSwipeRefreshLayout.setOnRefreshListener(this);
//        mSwipeRefreshLayout.setRefreshing(false);
    }
```
2.laout:
```
 <android.support.v4.widget.SwipeRefreshLayout
        android:id="@+id/fresh"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <cn.jiangzehui.mds.media.view.VideoListLayout
            android:id="@+id/layout"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

    </android.support.v4.widget.SwipeRefreshLayout>
```
# 初始化设置
## 后退键Snackbar显示
```
long newTime;
    /**
     * 监听返回键
     */
    @Override
    public void onBackPressed() {

        if (mDrawerLayout.isDrawerOpen(nv)) {
            mDrawerLayout.closeDrawers();
            return;
        }
        if (System.currentTimeMillis() - newTime > 2000) {
            newTime = System.currentTimeMillis();
            Snackbar snackbar = Snackbar.make(mDrawerLayout, "再按一次返回键退出程序", Snackbar.LENGTH_SHORT);
            snackbar.getView().setBackgroundColor(getResources().getColor(R.color.colorPrimary));
            snackbar.show();
            //Toast.makeText(this, "再按一次返回键退出程序", Toast.LENGTH_SHORT).show();
        } else {
            finish();
        }
    }
```
# 上下文菜单与选项菜单
```
    menu.xml:
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:title="1"/>
    <item android:title="2"/>
</menu>
```
## 选项菜单:
```
Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.menu_main,menu);
        return super.onCreateOptionsMenu(menu);
    }
```
## 上下文菜单:
```
//按下按钮后显示上下文菜单(未实现)
Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {
        getMenuInflater().inflate(R.menu.menu_main,menu);
        super.onCreateContextMenu(menu, v, menuInfo);
    }
mButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                v.showContextMenu();
                Toast.makeText(MainActivity.this, "onClick", Toast.LENGTH_SHORT).show();
            }
        });
```
# 网络通信
## 鸿洋大神的okhttp封装
https://github.com/hongyangAndroid/okhttputils
compile 'com.zhy:okhttputils:2.6.2'
### get
```
private void get(){
        OkHttpUtils
                .get()
                .url("http://apis.baidu.com/apistore/weatherservice/citylist")
                .addHeader("apikey","592e46b62cfe201c68bf7d9f18db11ee")
                .addParams("cityname", "朝阳")
                .build()
                .execute(new StringCallback()
                {
                    @Override
                    public void onError(Call call, Exception e, int id) {
 
                    }
 
                    @Override
                    public void onResponse(String response, int id) {
                        System.out.println("response="+response+"id="+id);
                    }
                });
    }
```
//get请求中addParams是将参数放到URL Parameter Key;post请求是放到Body Parameter Key似乎不能放到URL中
### post
```
private void post(){
        OkHttpUtils
                .post()
                .url("http://121.40.184.143:99/cailei/getPlan_zong.php")
                .addParams("account", "1")
                .build()
                .execute(new StringCallback()
                {
                    @Override
                    public void onError(Call call, Exception e, int id) {
 
                    }
                    @Override
                    public void onResponse(String response, int id) {
                        //response=[{"name":"英语四六级(推荐)","progress":"1"},{"name":"驾照","progress":"0"},{"name":"普通话","progress":"0"},{"name":"二级c语言","progress":"0"},{"name":"三级数据库","progress":"0"}]
                        List<Plan_zong> plan_zongs=new Gson().fromJson(response,new TypeToken<List<Plan_zong>>() {}.getType());
                        Log.i("Plan_zongs=","--------------------Plan_zongs--------------------");
                        for (Plan_zong plan_zong:plan_zongs){
                            Log.i("Plan_zong.name=",plan_zong.getName());
                            Log.i("Plan_zong.progress=",plan_zong.getProgress());
                        }
                        Log.i("Plan_zongs=","--------------------Plan_zongs--------------------");
//                        System.out.println("response="+response+"id="+id);
                        Log.i("Gson","="+new Gson().toJson(plan_zongs));
                    }
                });
    }
```
### post发送json
```
private void post_json(){
        Plan_zong plan_zong=new Plan_zong();
        plan_zong.setName("cai");
        plan_zong.setProgress("1");
        OkHttpUtils
                .postString()
                .url("http://121.40.184.143:99/cailei/login.php")
                .content(new Gson().toJson(plan_zong))
                .mediaType(MediaType.parse("application/json; charset=utf-8"))
                .build()
                .execute(new StringCallback() {
                    @Override
                    public void onError(Call call, Exception e, int id) {
 
                    }
 
                    @Override
                    public void onResponse(String response, int id) {
 
                    }
                });
    }
```
### post发送图片/文件+进度条
```
 private void post_file(){
        byte[] bitmap_bytes=BitmapUtil.bitmapToByte(BitmapFactory.decodeResource(getResources(),R.drawable.bt_search_branch));
        File file= new File(Environment.getExternalStorageDirectory(),"image.png");
        try {
            FileUtils.writeByteArrayToFile(file,bitmap_bytes);
            String url="http://192.168.209.2/example/setImage.php";
            OkHttpUtils
                    .postFile()
                    .url(url)
                    .file(file)
                    .build()
                    .execute(new StringCallback() {
                        @Override
                        public void inProgress(float progress, long total, int id) {
                            super.inProgress(progress, total, id);
                            Log.i("okhttp","progress="+progress);
                        }
                        @Override
                        public void onError(Call call, Exception e, int id) {

                        }

                        @Override
                        public void onResponse(String response, int id) {
                            Log.i("okhttp","response="+response);
                        }
                    });
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
```
### 下载文件
```
private void downloadFile(){
        OkHttpUtils//
                .get()//
                .url("http://sw.bos.baidu.com/sw-search-sp/software/e6207d37846ba/QQ_8.7.19113.0_setup.exe")//下载页
                .build()//
                .execute(new FileCallBack(Environment.getExternalStorageDirectory().getAbsolutePath(), "gson-2.2.1.jar")//下载文件路径,文件名
                {
                    @Override
                    public void inProgress(float progress, long total, int id) {
                        super.inProgress(progress, total, id);
                        Log.i("okhttp","progress="+progress);
//                        mProgressBar.setProgress((int) (100 * progress));
                    }
                    @Override
                    public void onError(Call call, Exception e, int id) {
                        Log.e("okhttp", "onError :" + e.getMessage());
                    }
                    @Override
                    public void onResponse(File response, int id) {
                        Log.e("okhttp", "onResponse :" + Environment.getExternalStorageDirectory().getAbsolutePath());

                    }
                });
    }
```
## Gson
http://www.jianshu.com/p/e740196225a4
http://blog.csdn.net/axuanqq/article/details/51441590
### Gson将json转类
```
//log={"name":"cai","progress":"1"}
Plan_zong plan_zong2=new Gson().fromJson(log, Plan_zong.class);
        Log.i("Gson","name="+plan_zong2.getName());
        Log.i("Gson","progress="+plan_zong2.getProgress());
```
### Gson将类转为Json
```
Plan_zong plan_zong=new Plan_zong();
        plan_zong.setName("cai");
        plan_zong.setProgress("1");
        String log=new Gson().toJson(plan_zong);
        Log.i("Gson",log);
```
### Gson将JsonArray转为类的List
```
 List<Plan_zong> plan_zongs=new Gson().fromJson(response,new TypeToken<List<Plan_zong>>() {}.getType());

//response=[{"name":"英语四六级(推荐)","progress":"1"},{"name":"驾照","progress":"0"},{"name":"普通话","progress":"0"},{"name":"二级c语言","progress":"0"},{"name":"三级数据库","progress":"0"}]
```
### Gson将List转JsonArray
```
new Gson().toJson(plan_zongs)
```
## Glide加载图片
### 静态图片
```
//Glide.fitCenter()是图片中心显示
Glide.with(activity).load(listImage.get(0)).placeholder(R.drawable.account_avatar).into(holder.imageView);
```
上面这种方式into里的imageView不能设置为固定大小，如果要用使用下面代码
```
Glide.with(activity).load(listImage.get(0)).placeholder(R.drawable.account_avatar).into(
                    new SimpleTarget<GlideDrawable>() {
                        @Override
                        public void onResourceReady(GlideDrawable resource, GlideAnimation<? super GlideDrawable> glideAnimation) {
                            holder.imageView.setImageDrawable(resource);
                        }
            });
```
### Gif图片
其实和加载静态图片一样
主要代码
```
Glide.with(context).load(finalImgUrl).asGif().thumbnail(0.1f).diskCacheStrategy(DiskCacheStrategy.SOURCE).placeholder(R.mipmap.ic_mr).into(mImageView);
//            加载本地gif图片
//            Glide.with(this).load(R.drawable.loading).into(imageView);
```
参考以下代码:Glide加载RecyclerView中的gif图片
```
//RecyclerView中的gif图片,可以设置是否自动加载gif图片
    class MyHolder extends RecyclerView.ViewHolder {
        TextView tv_title;
        ImageView mImageView;
        public MyHolder(View itemView) {
            super(itemView);
            tv_title = (TextView) itemView.findViewById(R.id.tv_title);
            mImageView = (ImageView) itemView.findViewById(R.id.iv);
        }

        public void setTitle(String title) {
            if (null == tv_title) return;
            tv_title.setText(title + "\n");

        }


        boolean gif_auto_bool = false;
        public void setImg(String imgUrl, final int position) {


            if (null == mImageView) return;
            if (!imgUrl.contains("http")) {
                imgUrl = "http://www.zbjuran.com" + imgUrl;
                //Log.i("imgUrl", imgUrl);
            }
            final WeakReference<ImageView> wr = new WeakReference<>(mImageView);
            final ImageView wr_iv = wr.get();
            if (imgUrl.contains("gif")) {
                //是否自动加载git
                if (!gif_auto_bool) {
                    final boolean[] bool = {true};
                    if (wr_iv != null) {
                        Glide.with(context).load(imgUrl).asBitmap().diskCacheStrategy(DiskCacheStrategy.SOURCE).placeholder(R.mipmap.ic_mr).into(wr_iv);
                        final String finalImgUrl = imgUrl;
                        wr_iv.setOnClickListener(new View.OnClickListener() {
                            @Override
                            public void onClick(View view) {
                                if (finalImgUrl.contains("gif")) {
                                    //当前图片是否加载
                                    if (bool[0]) {
                                        Glide.with(context).load(finalImgUrl).asGif().thumbnail(0.1f).diskCacheStrategy(DiskCacheStrategy.SOURCE).listener(new RequestListener<String, GifDrawable>() {
                                            @Override
                                            public boolean onException(Exception e, String model, Target<GifDrawable> target, boolean isFirstResource) {
                                                return false;
                                            }

                                            @Override
                                            public boolean onResourceReady(GifDrawable resource, String model, Target<GifDrawable> target, boolean isFromMemoryCache, boolean isFirstResource) {
                                                if (isFirstResource) {
                                                    Log.i("imgUrl", "onResourceReady");
                                                    bool[0] = false;
                                                }
                                                return false;
                                            }
                                        }).placeholder(R.mipmap.ic_mr).into(wr_iv);

                                    } else {
                                        T.open(context, ShowPicActivity.class, "url", list.get(position).getUrl());

                                    }
                                } else {
                                    T.open(context, ShowPicActivity.class, "url", list.get(position).getUrl());

                                }


                            }
                        });
                    } else {
                        Glide.with(context).load(imgUrl).asBitmap().diskCacheStrategy(DiskCacheStrategy.SOURCE).placeholder(R.mipmap.ic_mr).into(mImageView);
                        final String finalImgUrl = imgUrl;
                        mImageView.setOnClickListener(new View.OnClickListener() {
                            @Override
                            public void onClick(View view) {
                                if (finalImgUrl.contains("gif")) {
                                    if (bool[0]) {
                                        bool[0] = false;
                                        Glide.with(context).load(finalImgUrl).asGif().thumbnail(0.1f).diskCacheStrategy(DiskCacheStrategy.SOURCE).listener(new RequestListener<String, GifDrawable>() {
                                            @Override
                                            public boolean onException(Exception e, String model, Target<GifDrawable> target, boolean isFirstResource) {
                                                return false;
                                            }

                                            @Override
                                            public boolean onResourceReady(GifDrawable resource, String model, Target<GifDrawable> target, boolean isFromMemoryCache, boolean isFirstResource) {
                                                if (isFirstResource) {
                                                    Log.i("imgUrl", "onResourceReady");
                                                    bool[0] = false;
                                                }

                                                return false;
                                            }
                                        }).placeholder(R.mipmap.ic_mr).into(mImageView);
                                    } else {
                                        T.open(context, ShowPicActivity.class, "url", list.get(position).getUrl());
                                    }
                                } else {
                                    T.open(context, ShowPicActivity.class, "url", list.get(position).getUrl());

                                }


                            }
                        });
                    }


                } else {
                    Glide.with(context).load(imgUrl).asGif().diskCacheStrategy(DiskCacheStrategy.SOURCE).placeholder(R.mipmap.ic_mr).into(mImageView);
                }
            } else {
                if (wr_iv != null) {
                    wr_iv.setOnClickListener(new View.OnClickListener() {
                        @Override
                        public void onClick(View view) {
                            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
                                Intent intent = new Intent(context, ShowPicActivity.class);
                                intent.putExtra("url", list.get(position).getUrl());
                                context.startActivity(intent, ActivityOptions.makeSceneTransitionAnimation((Activity) context, wr_iv, "shareTransition").toBundle());
                            } else {
                                T.open(context, ShowPicActivity.class, "url", list.get(position).getUrl());
                            }
                        }
                    });
                    Glide.with(context).load(imgUrl).diskCacheStrategy(DiskCacheStrategy.SOURCE).placeholder(R.mipmap.ic_mr).into(wr_iv);

                } else {
                    mImageView.setOnClickListener(new View.OnClickListener() {
                        @Override
                        public void onClick(View view) {

                            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
                                Intent intent = new Intent(context, ShowPicActivity.class);
                                intent.putExtra("url", list.get(position).getUrl());
                                context.startActivity(intent, ActivityOptions.makeSceneTransitionAnimation((Activity) context, mImageView, "shareTransition").toBundle());
                            } else {
                                T.open(context, ShowPicActivity.class, "url", list.get(position).getUrl());
                            }
                        }
                    });
                    Glide.with(context).load(imgUrl).diskCacheStrategy(DiskCacheStrategy.SOURCE).placeholder(R.mipmap.ic_mr).into(mImageView);
                }
            }
        }
    }
```
# 数据存储与读取
## 内部数据库
### 手机自带sqlite
```
initSqlLite();
        queryData_sqlite();
        initView();
private void initView() {
        initRecycleView();
        mButtonAdd.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                addData_sqlite();
            }
        });
        mButtonDelete.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                deleteData_sqlite();
            }
        });
        mButtonUpdata.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                upData_sqlite();
            }
        });
    }
    private List<Person> allPersons = new ArrayList<>();
    private List<Song> allSongs = new ArrayList<>();
    private MyRecyclerViewAdapter adapter;
 
    private void initRecycleView() {
        adapter = new MyRecyclerViewAdapter(this, allPersons);
        mRecyclerView.setLayoutManager(new LinearLayoutManager(this));
        //自动滑动到最低,更新List时需要写一次
        mRecyclerView.setAdapter(adapter);
        //adapter.notifyDataSetChanged();
        //mRecyclerView.smoothScrollToPosition(adapter.getItemCount());
    }
    private void initSqlLite() {
        //打开或创建test.db数据库
        SQLiteDatabase db = openOrCreateDatabase("test.db", Context.MODE_PRIVATE, null);
        db.execSQL("DROP TABLE IF EXISTS person");
        //创建person表
        db.execSQL("CREATE TABLE person (id INTEGER PRIMARY KEY AUTOINCREMENT, name VARCHAR, age VARCHAR)");
        //关闭当前数据库
        allPersons.add(new Person());
        db.close();
    }
    private void addData_sqlite() {
        SQLiteDatabase db = openOrCreateDatabase("test.db", Context.MODE_PRIVATE, null);
        Person person = new Person();
        person.setName("蔡荣程");
        person.setAge("22");
        //ContentValues以键值对的形式存放数据
        ContentValues cv = new ContentValues();
        cv.put("name", person.getName());
        cv.put("age", person.getAge());
//        //插入ContentValues中的数据
        db.insert("person", null, cv);
        allPersons.add(person);
        adapter.notifyDataSetChanged();
        Toast.makeText(this, "添加最后一项成功", Toast.LENGTH_SHORT).show();
        db.close();
    }
    private void deleteData_sqlite() {
        SQLiteDatabase db = openOrCreateDatabase("test.db", Context.MODE_PRIVATE, null);
        int id=adapter.getItemCount();
        db.delete("person", "id = ?", new String[]{String.valueOf(id)});
        allPersons.remove(id-1);
        adapter.notifyDataSetChanged();
        Toast.makeText(this, "删除最后一项成功", Toast.LENGTH_SHORT).show();
        db.close();
    }
    private void upData_sqlite() {
        SQLiteDatabase db = openOrCreateDatabase("test.db", Context.MODE_PRIVATE, null);
        ContentValues cv = new ContentValues();
        Person person = new Person();
        person.setName("蔡荣程");
        person.setAge("0");
        cv.put("name", person.getName());
        cv.put("age", person.getAge());
        db.update("person", cv, "id = ?", new String[]{String.valueOf(adapter.getItemCount())});
        allPersons.get(adapter.getItemCount()-1).setAge("0");
        adapter.notifyDataSetChanged();
        Toast.makeText(this, "修改最后一项成功", Toast.LENGTH_SHORT).show();
        db.close();
    }
    private void queryData_sqlite() {
        SQLiteDatabase db = openOrCreateDatabase("test.db", Context.MODE_PRIVATE, null);
        //        Cursor c = db.rawQuery("SELECT * FROM person WHERE age >= ?", new String[]{"33"});
        Cursor c = db.rawQuery("SELECT * FROM person",null);
        while (c.moveToNext()) {
            Person person=new Person();
            person.setName(c.getString(c.getColumnIndex("name")));
            person.setAge(c.getString(c.getColumnIndex("age")));
            allPersons.add(person);
        }
        c.close();
        db.close();
    }
```
### litepal
compile 'org.litepal.android:core:1.4.0'
首先在application中注册
```
public class Application extends android.app.Application{
    @Override
    public void onCreate() {
        super.onCreate();
        LitePal.initialize(this);
    }
}
```
```
<application
        android:name=".Application"
```
assets内创建litepal.xml:
```
<?xml version="1.0" encoding="utf-8"?>
<litepal>
    <list>
        <mapping class="com.example.administrator.ex.SqlLite.Album"></mapping>
        //对应类Song
        <mapping class="com.example.administrator.ex.SqlLite.Song"></mapping>
    </list>
</litepal>
```
创建类Song:
```
import org.litepal.annotation.Column;
import org.litepal.crud.DataSupport;
 
/**
* Created by Administrator on 2016/11/20 0020.
*/
 
public class Song extends DataSupport {
    @Column(nullable = false)
    private String name;
 
    private int duration;
 
    @Column(ignore = true)
    private String uselessField;
 
    public void setName(String name) {
        this.name = name;
    }
 
    public void setDuration(int duration) {
        this.duration = duration;
    }
 
    public String getName() {
        return name;
    }
    public int getDuration() {
        return duration;
    }
}
```
Activity使用:
```
initData();
        queryData();
            private List<Song> allSongs=new ArrayList<>();
private void initData() {
        //根据litepal.xml初始数据库如果之前存在将优化性修改数据库
        SQLiteDatabase db = LitePal.getDatabase();
    }
    private void addData() {
        Song song1 = new Song();
        song1.setName("song1");
        song1.setDuration(320);
        song1.save();
        queryData();
    }
    private void deleteData() {
//        DataSupport.delete(Song.class, id);
//        DataSupport.deleteAll(Song.class, "duration > ?", "350");
        DataSupport.deleteAll(Song.class);
        queryData();
    }
 
    private void upData() {
        Album albumToUpdate = DataSupport.find(Album.class, 1);
        albumToUpdate.setPrice(20.99f); // raise the price
        albumToUpdate.save();
    }
    private void queryData() {
        allSongs = DataSupport.findAll(Song.class);
        List<Song> songs = DataSupport.where("name like ?", "song%").order("duration").find(Song.class);
        //不好用，请重写
        if (adapter!=null){
            adapter=null;
            initRecycleView();
        }
    }
```
## androidStudio assets文件读取
```
public String ReadTxtFile(String strFilePath)
    {
        String path = strFilePath;
        String content = ""; //文件内容字符串
        //打开文件
        File file = new File(path);
        //如果path是传递过来的参数，可以做一个非目录的判断
        if (file.isDirectory())
        {
            Log.d("TestFile", "The File doesn't not exist.");
        }
        else
        {
            try {
                InputStream instream = getResources().getAssets().open("a.json");
//                InputStream instream = new FileInputStream(file);
                if (instream != null)
                {
                    InputStreamReader inputreader = new InputStreamReader(instream);
                    BufferedReader buffreader = new BufferedReader(inputreader);
                    String line;
                    //分行读取
                    while (( line = buffreader.readLine()) != null) {
                        content += line + "\n";
                    }
                    instream.close();
                }
            }
            catch (java.io.FileNotFoundException e)
            {
                Log.d("TestFile", "The File doesn't not exist.");
            }
            catch (IOException e)
            {
                Log.d("TestFile", e.getMessage());
            }
        }
        return content;
    }
```
原本是从指定路径读取文本，16.17改写为从assets读取指定a.json
# 通用组件
## CoordinatorLayout
```
<android.support.design.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">
</android.support.design.widget.CoordinatorLayout>
```
## 自定义VIEW
设置view长宽
```
    //这个是放在布局中要加的
    public MyListView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        //默认View是只支持EXACTLY(精确大小)或者match
        setMeasuredDimension(measureWidth(widthMeasureSpec),measureWidth(heightMeasureSpec));
    }
    //可以长宽重构两次，现在只有一次
    private int measureWidth(int widthMeasureSpec){
        int measureMode=MeasureSpec.getMode(widthMeasureSpec);
        int measureSize=MeasureSpec.getSize(widthMeasureSpec);
        //精确
        if (measureMode==MeasureSpec.EXACTLY)return measureSize;
        //wrap_content 从300和容器大小选最小
        else if (measureMode==MeasureSpec.AT_MOST)return Math.min(300,measureSize);
        else return measureSize;
    }
```
